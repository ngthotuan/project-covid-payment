<!-- Page content -->
<div id="page-content">
  <div class="block full">
    <!-- All Products Title -->
    <div class="block-title">
      <h2><strong>Tạo mới</strong> gói nhu yếu phẩm</h2>
    </div>

    <!-- Product Edit Content -->
    <div class="row">
      <form method="post" id="form-category">
        <div class="col-lg-5">
          <!-- General Data Block -->
          <div class="block" class="">
            <!-- General Data Title -->
            <div class="block-title">
              <h2>
                <i class="fa fa-pencil"></i> <strong>Thông tin gói</strong>
              </h2>
            </div>
            <!-- END General Data Title -->

                <input
                    type="hidden"
                    name="id"
                     value="<%= typeof category !== 'undefined' ? category.id : '' %>"
                  />
            <!-- General Data Content -->
            <div class="form-horizontal form-bordered">
              <div class="form-group">
                <label class="col-md-3 control-label" for="product-name"
                  >Tên</label
                >
                <div class="col-md-9">
                  <input
                    type="text"
                    id="categor_name"
                    name="name"
                    class="form-control"
                    placeholder="Nhập tên gói"
                     value="<%= typeof category !== 'undefined' ? category.name : '' %>"
                  />
                </div>
              </div>
              <div class="form-group">
                <label class="col-md-3 control-label">Giới hạn/người</label>
                <div class="col-md-9">
                  <input
                    type="number"
                    id="limit_person"
                    name="limit_person"
                    class="form-control"
                    placeholder="Số lượng"
                   min="1"
                   step="1"
                   value="<%= typeof category !== 'undefined' ? category.limit_person : '' %>"
                  />
                </div>
              </div>
              <div class="form-group">
                <label class="col-md-3 control-label" for="example-chosen"
                  >Thời gian giới hạn</label
                >
                <div class="col-md-9">
                  <select
                    id="limit_time"
                    name="limit_time"
                    class="select-chosen select-time"
                    data-placeholder="Chọn thời gian..."
                    style="width: 250px"
                    required
                  >
                    <option value=""></option>
                    <!-- Required for data-placeholder attribute to work with Chosen plugin -->
                    <option value="DATE"  <%= typeof category !== 'undefined' && category.limit_time === 'DATE'  ? 'selected' : ''  %>>NGÀY</option>
                    <option value="WEEK" <%= typeof category !== 'undefined' && category.limit_time === 'WEEK'  ? 'selected' : '' %>>TUẦN</option>
                    <option value="MONTH" <%= typeof category !== 'undefined' && category.limit_time === 'MONTH'  ? 'selected' : '' %>>THÁN</option>
                  </select>
                </div>
              </div>
            </div>
            <!-- END General Data Content -->
          </div>
          <!-- END General Data Block -->
        </div>
        <div class="col-lg-7">
          <!-- Product Images Block -->
          <div class="block">
            <!-- Product Images Title -->
            <div class="block-title">
              <h2>
                <i class="gi gi-cake sidebar-nav-icon"></i>
                <strong>Sản phẩm</strong>
              </h2>
            </div>
            <!-- END Product Images Title -->
            <div id="category-product">
            <% if (typeof category !== 'undefined' && category.product_categories.length > 0) { %>
                            <% category.product_categories.forEach((productCate, index) => {%>
                            <div id="product<%=index%>" class="form-horizontal form-bordered" style="margin-bottom: 25px">
                              <div class="form-group">
                                <div class="form-inline">
                                  <label class="col-md-2 control-label">Sản phẩm</label>
                                  <div class="col-md-5">
                                    <select
                                      name="product_id"
                                      class="select-chosen select-product"
                                      data-placeholder="Chọn sản phẩm..."
                                      style="width: 100%"
                                    >
                                      <option value=""></option>
                                      <!-- Required for data-placeholder attribute to work with Chosen plugin -->
                                      <% products.forEach(function(product) { %>
                                      <option value=<%=product.id%>
                                      <%= product.id === productCate.product_id  ? 'selected' : ''  %> >
                                        <%= product.name%>
                                      </option>
                                      <%})%>
                                    </select>
                                  </div>
                                </div>
                                <div class="form-inline">
                                  <label class="col-md-2 control-label">Giới hạn</label>
                                  <div class="col-md-2">
                                    <input
                                      type="number"
                                      name="limit_product"
                                      class="form-control limit-product"
                                      placeholder="Số lượng"
                                      value="<%=productCate.limit_product%>"
                                      min="1"
                                      step="1"
                                    />
                                  </div>
                                </div>
                                <button class="btn fa fa-times-circle-o fa-2x remove-product"
                                         title="Remove detail"></button>
                              </div>
                            </div>
                            <%})%>
                            <%}%>

              <!-- <div id="product<%= typeof category !== 'undefined' ? category.product_categories.length : 0 %>" class="form-horizontal form-bordered" style="margin-bottom: 25px">
                <div class="form-group">
                <div class="form-inline">
                  <label class="col-md-2 control-label">Sản phẩm</label>
                  <div class="col-md-5">
                    <select
                      name="product_id"
                      class="select-chosen select-product"
                      data-placeholder="Chọn sản phẩm..."
                      style="width: 100%"
                    >
                      <option value=""></option>
                      <!-- Required for data-placeholder attribute to work with Chosen plugin -->
                      <!-- <% products.forEach(function(product) { %>
                      <option value=<%=product.id%>
                        ><%= product.name%>
                      </option>
                      <%})%>
                    </select>
                  </div>
                </div>
                  <div class="form-inline">
                  <label class="col-md-2 control-label">Giới hạn</label>
                  <div class="col-md-2">
                    <input
                      type="number"
                      name="limit_product"
                      class="form-control limit-product"
                      placeholder="Số lượng"
                      min="1"
                      step="1"
                    />
                  </div>
                </div>
                <button class="btn fa fa-times-circle-o fa-2x remove-product"
                 title="Remove detail"
                ></button>
              </div>
              </div> -->
            </div>
            <div>
              <button
                type="button"
                class="btn btn-primary mb-2"
                onClick="addNextProduct()"
              >
                Thêm sản phẩm
              </button>
            </div>
          </div>
          <!-- END Product Images Block -->
        </div>
        <div class="form-group form-actions">
          <div class="col-md-12 text-center">
            <button type="submit" class="btn btn-primary">
              <i class="fa fa-floppy-o"></i> Lưu
            </button>
            <%if (typeof category !== 'undefined'){%>
             <a href="/categories" class="btn btn-warning">
                            <i class="fa fa-repeat"></i> Hủy bỏ
                         </a>

            <%}else{%>
           <button type="reset" class="btn btn-warning">
                         <i class="fa fa-repeat"></i> Xóa trắng
                       </button>
            <%}%>
          </div>
        </div>
      </form>
    </div>
    <!-- END Product Edit Content -->
  </div>
  <script>
    const products = JSON.parse('<%- typeof products !== 'undefined' && JSON.stringify(products) %>');
</script>
  <script src="/js/category/category-form.js"></script>
</div>
